<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Building Your First Couchbase Application</title>
	<meta name="description" content="">
	<meta name="author" content="Aaron Benton">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="bower_components/reveal-js/css/reveal.min.css">
	<link rel="stylesheet" href="bower_components/reveal-js/css/theme/default.css" id="theme">
	<!-- For syntax highlighting -->
	<link rel="stylesheet" href="bower_components/reveal-js/lib/css/zenburn.css">
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- If the query includes 'print-pdf', include the PDF print sheet -->
	<script>
		if( window.location.search.match( /print-pdf/gi ) ) {
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = 'bower_components/reveal-js/css/print/pdf.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		}
	</script>
	<!--[if lt IE 9]>
	<script src="bower_components/reveal-js/lib/js/html5shiv.js"></script>
	<![endif]-->
</head>
<body>
<div class="reveal">
	<div class="slides">
		<!-- start of slide -->
		<section>
			<h3>Project Files: <br /><a href="http://bit.ly/1KX2MhR" class="no-transform">http://bit.ly/1KX2MhR</a></h3>
			<br />
			<h3>Installation Files: <br /><a class="no-transform" href="http://bit.ly/1R9255T">http://bit.ly/1R9255T</a>
			<br /><br />
			<h3>Or Copy Files From a USB Drive</h3>
			<br />
			<p>Open the "installation" folder and follow the setup instructions for your platform</p>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h3>Build Your First </h3>
			<h1 class="no-transform">Couchbase Application</h1>
			<p>
				<small>Created by <a href="#">Aaron Benton</a> / <a href="http://twitter.com/bentonam">@bentonam</a></small>
			</p>
			<p>Repo: <a href="https://github.com/bentonam/build-your-first-couchbase-application">https://github.com/bentonam/build-your-first-couchbase-application</a></p>
		</section>
		<!-- end of slide -->
		<!-- start of slide --->
		<section>
			<h2>About Me</h2>
			<div class="group">
				<div class="column">
					<ul>
						<li>Shop.com / Market America</li>
						<li>Mobile Architect</li>
						<li>Kansas Jayhawks</li>
					</ul>
				</div>
				<div class="column">
					<img src="assets/img/oakley-stone-mountain.png" style="float: right; width: 75%">
				</div>
			</div>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h2>Site Features</h2>
			<ul>
				<li>Categories</li>
				<li>Brands</li>
				<li>New Products</li>
				<li>Sale Products</li>
				<li>Search</li>
				<li>
					Product Detail
					<ul>
						<li>Product Reviews</li>
						<li>Related Products</li>
					</ul>
				</li>
				<li>Shopping Cart</li>
				<li>Checkout</li>
				<li>Order Tracking</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h2>Technologies / SDKs</h2>
			<ul>
				<li>CommandBox</li>
				<li>Lucee</li>
				<li>Couchbase</li>
				<li>CFCouchbase</li>
				<li>Couchbase SDK</li>
				<li>Elasticsearch</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h2>Couchbase</h2>
			<ul>
				<li>Distributed NoSQL Database</li>
				<li>Document Storage as JSON or Binary</li>
				<li>Cluster Friendly</li>
				<li>Scalable Architecture</li>
				<li>Data Replication</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h2>CFCouchbase</h2>
			<ul>
				<li>CF Wrapper for Couchbase SDK</li>
				<li>get, set, query</li>
				<li>CF to JSON</li>
			</ul>
			<br />
			<br />
			<div class="fragment">
				<h3 class="link">API Docs: <br /><pre><a class="no-transform" href="http://goo.gl/ZGk6za">http://goo.gl/ZGk6za</a></pre></h3>
				<h3 class="link">Documentation: <br /><pre><a class="no-transform" href="http://goo.gl/ET2u3n">http://goo.gl/ET2u3n</a></pre></h3>
			</div>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h2>Exercises</h2>
			<ul>
				<li>5 - 10min / exercise</li>
				<li>Exercises are Progressive</li>
				<li>Instructions for each exercises folder</li>
				<li>Ask Questions</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h2>Couchbase Admin</h2>
			<ul>
				<li>Document ID Max 250 Bytes</li>
				<li>Max Document Size 20mb</li>
				<li>Couchbase Admin limits you to 2.5kb</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #1</h2>
			<h3>Working with Couchbase Documents</h3>
			<ul>
				<li>1.a - Starting a Lucee Server</li>
				<li>1.b - Connecting to Couchbase</li>
				<li>1.c - Exploring Documents</li>
				<li>1.d - Import Example Data</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Document Types for Exercises</h2>
			<ul>
				<li>config</li>
				<li>product</li>
				<li>review</li>
				<li>product review counter</li>
				<li>order</li>
				<li>order counter</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Static Documents</h2>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #2</h2>
			<h3>Static Documents for Site Config</h3>
			<ul>
				<li>2.a - Create a Site Config Document</li>
				<li>2.b - Retrieve the Site Config Document</li>
				<li>2.c - Retrieve the Categories Config Document</li>
				<li>2.d - Retrieve the Brands Config Document</li>
				<li>2.e - Retrieve the Banners Config Document</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Multiple Gets</h2>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #3</h2>
			<h3>Multi Get Keys</h3>
			<ul>
				<li>3.a - Retrieve the Recent Products</li>
				<li>3.b - Retrieve the Sale Products</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Views and Queries</h2>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Views for Creating Indices</h2>
			<ul>
				<li>JS Function applied to <u>Every</u> Document</li>
				<li>2 arguments: doc, meta</li>
				<li>Key, Value and Document ID</li>
				<li>Value can be <em>null</em></li>
				<li>The emit() function</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Map and Reduce</h2>
			<ul>
				<li>Map Function</li>
				<li>
					Built-in Reduce Functions
					<ul>
						<li>_count</li>
						<li>_sum</li>
						<li>_stats</li>
					</ul>
				</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>View Gotchas</h2>
			<ul>
				<li>Do not assume that the field will exist</li>
				<li>Emitted Keys are <u>Case sensitive</u></li>
				<li>Use parseInt() / parseFloat() for numbers</li>
				<li>Validate the meta.type === "json"</li>
				<li>Keys can be a simple or complex value</li>
				<li>Max key size 4096 bytes</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Document Data Flow</h2>
			<p>The document is:</p>
			<ol>
				<li class="fragment">written to object-managed cache (memory)</li>
				<li class="fragment">added to the Intra-Cluster Replication Queue</li>
				<li class="fragment">added to the Disk Queue</li>
				<li class="fragment">pushed to other clusters via XDCR <br />after the Disk Queue is flushed</li>
				<li class="fragment">indexed</li>
			</ol>
			<br />
			<br />
			<blockquote class="fragment">
				Views are updated only <u>after</u> the document has been persisted disk
			</blockquote>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Document Data Flow</h2>
			<img src="assets/img/couchbase-write-flow.png" style="max-width: 500px;"/>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>View Example</h2>
			<div class="fragment">
			<u>Map Function</u>
    <pre><code>function ( doc, meta ) {
    if(
        doc.doc_type &&
        doc.doc_type === "product" &&
        doc.title
    ){
        emit( doc.title.toLowerCase(), null );
    }
}</code></pre>
			</div>
			<div class="fragment">
				<u>Reduce Function</u>
				<pre><code>_count</code></pre>
			</div>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Query Options</h2>
			<ul class="margin_right">
				<li>descending</li>
				<li>startkey</li>
				<li>endkey</li>
				<li>startkey_docid</li>
				<li>endkey_docid</li>
				<li>group</li>
			</ul>
			<ul>
				<li>group_level</li>
				<li>inclusive_end</li>
				<li>key</li>
				<li>keys</li>
				<li>reduce</li>
				<li>stale</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>View Flow</h2>
			<img src="assets/img/views-query-flow.png" style="max-width: 400px;"/>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #4</h2>
			<h3>Introduction to Queries</h3>
			<ul>
				<li>4.a - Create a Categories View in Couchbase</li>
				<li>4.b - Querying the Categories View</li>
				<li>4.c - Create a Brands View in Couchbase</li>
				<li>4.d - Querying the Brands View</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Query Grouping</h2>
			<ul>
				<li>Unique Keys are Output</li>
				<li>Must be used with a Reduce Function</li>
				<li>group = true</li>
				<li>Different from Group Level</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #5</h2>
			<h3>Query Grouping</h3>
			<ul>
				<li>5.a - Querying the Categories View with Grouping</li>
				<li>5.b - Querying the Brands View with Grouping</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Custom Map Logic</h2>
			<ul>
				<li>More than just existence checks</li>
				<li>Multiple emits from a single document</li>
				<li>Any Key / Value can be emitted</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #6</h2>
			<h3>Custom Logic in Map Functions</h3>
			<ul>
				<li>6.a - Create a Sale Products View in Couchbase</li>
				<li>6.b - Querying the On Sale View</li>
				<li>6.c - Browsing All On Sale Products</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Date Formats</h2>
			<ul>
				<li>2015-08-29 03:40:05 UTC</li>
				<li>Tue Sep 08 2015 12:41:00 GMT-0400 (EDT)</li>
				<li>2015-07-30T23:58:22.193Z</li>
				<li>1441730500797</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2 class="no-transform">dateToArray()</h2>
			<p>Takes a valid date and converts it into an array of date parts.</p>
			<p>1483175543000 becomes:</p>
			<pre><code>[
	2015,
	3,
	22,
	11,
	3,
	38
]</code></pre>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2 class="no-transform">dateToArray()</h2>
    <pre><code>function ( doc, meta ) {
    if(
        doc.doc_type &&
        doc.doc_type === "order" &&
        doc.order_date
    ){
        emit( dateToArray( doc.order_date ), null);
    }
}</code></pre>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>View with Date as Key</h2>
			<img src="assets/img/couchbase-datetoarray-view-results.png" style="max-width: 700px"/>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #7</h2>
			<h3>Working with Dates using Range Queries</h3>
			<ul>
				<li>7.a - Create a Recent Products View in Couchbase</li>
				<li>7.b - Querying the Recent View</li>
				<li>7.c - Browsing All Recent Products</li>
				<li>7.d - Update the On Sale Products View in Couchbase</li>
				<li>7.e - Querying the On Sale View</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Representing Documents as Objects</h2>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #8</h2>
			<h3>Inflating Documents to Objects</h3>
			<ul>
				<li>8.a - Create a Slug View in Couchbase</li>
				<li>8.b - Querying the Slug View</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Compound Keys</h2>
			<ul>
				<li>View keys can be <u>any</u> value</li>
				<li>Compound keys are just arrays</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #9</h2>
			<h3>Compound Keys</h3>
			<ul>
				<li>9.a - Create a Reviews View in Couchbase</li>
				<li>9.b - Querying the Reviews View to get the Total Reviews</li>
				<li>9.c - Querying the Reviews View to get the Reviews</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Reduce Functions</h2>
			<p>Couchbase has the following built-in reduce functions:</p>
			<ul>
				<li>_count</li>
				<li>_sum (requires a numeric value for the index)</li>
				<li>_stats (requires a numeric value for the index)</li>
			</ul>
			<p>We can also provide our own JS reduce function</p>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Custom Reduce Functions</h2>
			<p>The reduce function is passed 3 arguments:</p>
			<ol>
				<li>keys - Array of keys returned by the query</li>
				<li>values - Array of values returned by the query</li>
				<li>rereduce - Boolean whether or not to keep reducing</li>
			</ol>
			<br />
			<pre><code>function(keys, values, rereduce){
  var sum = values.reduce(
    function(a, b) {
      return a + b;
    }
  );
  return Math.round((sum / values.length) * 10) / 10;
}</code></pre>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #10</h2>
			<h3>Querying with Custom Reduce Functions</h3>
			<ul>
				<li>10.a - Create a Average Reviews View in Couchbase</li>
				<li>10.b - Querying Average Reviews View</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Query Values</h2>
			<ul>
				<li>10.a - Create a Average Reviews View in Couchbase</li>
				<li>10.b - Querying Average Reviews View</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Query Values</h2>
			<ul>
				<li>Only emit the value if you need it</li>
				<li>Each index has a key and a value</li>
				<li>The value can be used in a reduce function</li>
				<li>Sort order only applies to the key not the value</li>
				<li>The value is always returned to the application</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #11</h2>
			<h3>Working with Query Values</h3>
			<ul>
				<li>11.a - Create a Aggregate Reviews View in Couchbase</li>
				<li>11.b - Querying Aggregate Reviews View</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Creating a Primary Key</h2>
			<ul>
				<li>
					Secondary Indexes
					<ul>
						<li>Conditionally outputs keys / values</li>
					</ul>
				<li>
					Primary Key Indexes
					<ul>
						<li>Outputs every key with null value</li>
					</ul>
				</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #12</h2>
			<h3>Leveraging a Primary Key View</h3>
			<ul>
				<li>12.a - Create a All Products View in Couchbase</li>
				<li>12.b - Querying the All Products View</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Elasticsearch</h2>
			<ul>
				<li>Based on Lucene</li>
				<li>Full-text search engine</li>
				<li>REST Based</li>
				<li>JSON Document based</li>
				<li>Market share is 2<sup>nd</sup> only to Solr</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Couchbase and Elasticsearch</h2>
			<ul>
				<li>XDCR for Replication between clusters</li>
				<li>XDCR is used to feed Elasticsearch</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #13</h2>
			<h3>Introduction to Elastic Search</h3>
			<ul>
				<li>13.a - Install and Setup Elasticsearch</li>
				<li>13.b - Create a New Couchbase Cluster Reference</li>
				<li>13.c - Create a New Couchbase Replication</li>
				<li>13.d - Calling Elasticsearch for Searching of Products</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #14</h2>
			<h3>Creating a Shopping Cart</h3>
			<ul>
				<li>14.a - Retrieving the Shopping Cart</li>
				<li>14.b - Saving the Shopping Cart</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #15</h2>
			<h3>Writing Order Documents on Checkout</h3>
			<ul>
				<li>15.a - Retrieve the States</li>
				<li>15.b - Retrieve the Shipping Methods</li>
				<li>15.c - Get the Next Order ID</li>
				<li>15.d - Write the Order</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Exercise #16</h2>
			<h3>Order Tracking</h3>
			<ul>
				<li>16.a - Create a Order Lookup View</li>
				<li>16.b - Retrieve Placed Order</li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Couchbase Resources</h2>
			<ul>
				<li class="link">Developer Guides - <pre><a class="no-transform" href="http://goo.gl/7EjZCW">http://goo.gl/7EjZCW</a></pre></li>
				<li class="link">Webinars - <pre><a class="no-transform" href="http://goo.gl/muWrJS">http://goo.gl/muWrJS</a></pre></li>
				<li class="link">Whitepapers - <pre><a class="no-transform" href="http://goo.gl/YuQc04">http://goo.gl/YuQc04</a></pre></li>
				<li class="link">Blog - <pre><a class="no-transform" href="http://goo.gl/0ev3D9">http://goo.gl/0ev3D9</a></pre></li>
				<li class="link">YouTube Channel - <pre><a class="no-transform" href="https://goo.gl/V7FWI1">https://goo.gl/V7FWI1</a></pre></li>
				<li class="link">Forums - <pre><a class="no-transform" href="https://goo.gl/x9tjMC">https://goo.gl/x9tjMC</a></pre></li>
				<li class="link">IRC - <pre><a class="no-transform" href="##">irc.freenode.net/#couchbase</a></pre></li>
			</ul>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h2>Hiring</h2>
			<ul>
				<li>ColdFusion Developers</li>
				<li>iOS Developers</li>
				<li>Android Developers</li>
				<li>Hybrid Developers</li>
				<li>UI/UX Developers</li>
				<li>UI/UX Designers</li>
				<li>Project Managers</li>
			</ul>
			<br />
			<br />
			<h3 class="no-transform"><a href="mailto:hrrecruiter@marketamerica.com">hrrecruiter@marketamerica.com</a></h3>
			<aside class="notes">
			</aside>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section>
			<h1>Questions?</h1>
			<aside class="notes">
			</aside>
		</section>
		<!-- end of slide -->
		<!-- start of slide -->
		<section class="link">
			<h2>Repository: <br /><br /><pre><a class="no-transform" href="https://goo.gl/bIIWsW">https://goo.gl/bIIWsW</a></pre></h2>
		</section>
		<!-- end of slide -->
	</div>
</div>
<script src="bower_components/reveal-js/lib/js/head.min.js"></script>
<script src="bower_components/reveal-js/js/reveal.min.js"></script>
<script>
	// Full list of configuration options available here:
	// https://github.com/hakimel/reveal.js#configuration
	Reveal.initialize({
		controls: true,
		progress: true,
		history: true,
		center: true,
		theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
		transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
		// Parallax scrolling
		//parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
		// parallaxBackgroundSize: '2100px 900px',
		// Optional libraries used to extend on reveal.js
		dependencies: [
		{ src: 'bower_components/reveal-js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
		{ src: 'bower_components/reveal-js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		{ src: 'bower_components/reveal-js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		{ src: 'bower_components/reveal-js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
		{ src: 'bower_components/reveal-js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
		{ src: 'bower_components/reveal-js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
		]
	});
</script>
</body>
</html>